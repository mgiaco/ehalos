<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Halos: Page Table</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Page Table<br>
<small>
[<a class="el" href="group___v_m_m.html">Virtual Memory Management</a>]</small>
</h1>The Page Table consists of two parts, namely the Hash Anchor Table and the Inverted Page Table. This is to improve the search speed via a hashing algorithm for given ASID-VPN combinations. The init-, search-, update- and free-methods should be used from Memory Management to handle the Page Table, other methods are for internal use only.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#gf5ebfb7e466013140327368b655792fe">initPageTable</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g8edbef60b1d72e6ad3dffed3c57b5e7c">searchPageTableEntry</a> (<a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a> pTLBEntryHigh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_t_l_b_e_l_o.html">TLBELOPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g0021597aea50ac13519f811f316c4fd7">searchPageTableEntryLow</a> (<a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a> pTLBEntryHigh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g621765a4679ecc5e2d8e1257ba21d440">updatePageTableEntry</a> (<a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a> pTLBEntryHigh, <a class="el" href="struct_t_l_b_e_l_o_p_f_n_l_e_s_s.html">TLBELOPFNLESSPtr</a> pTLBEntryLow)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g85b6e33ff8a22b5c1e9e0b36e8f24c4c">freePageTableEntry</a> (<a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a> pTLBEntryHigh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g64821ed5828e71fb8cb12f99fffae069">getDissolvedVictimPTEntry</a> (<a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a> pTLBEntryHigh, int *pIPTIndex)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g0037f23be8f09ed71ce7ff34f93adcb9">dissolvePageTableEntry</a> (<a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> pPTEntry, <a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> pHashAnchorPTEntry, <a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> pPrevPTEntry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g5002efe2fb3da2510b62affe18807174">createPageTableEntry</a> (<a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a> pTLBEntryHigh, <a class="el" href="struct_t_l_b_e_l_o_p_f_n_l_e_s_s.html">TLBELOPFNLESSPtr</a> pTLBEntryLow, <a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> pHashAnchorPTEntry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m_m___p_t.html#g993bcff0f6138305b034e3b09e69cf8d">createHashAnchorPageTableEntry</a> (<a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a> pTLBEntryHigh, <a class="el" href="struct_t_l_b_e_l_o_p_f_n_l_e_s_s.html">TLBELOPFNLESSPtr</a> pTLBEntryLow)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The Page Table consists of two parts, namely the Hash Anchor Table and the Inverted Page Table. This is to improve the search speed via a hashing algorithm for given ASID-VPN combinations. The init-, search-, update- and free-methods should be used from Memory Management to handle the Page Table, other methods are for internal use only. 
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>... </dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>drb8w </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.0.0.1 </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g993bcff0f6138305b034e3b09e69cf8d"></a><!-- doxytag: member="PageTable.h::createHashAnchorPageTableEntry" ref="g993bcff0f6138305b034e3b09e69cf8d" args="(TLBEHIPtr pTLBEntryHigh, TLBELOPFNLESSPtr pTLBEntryLow)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> createHashAnchorPageTableEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryHigh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_l_o_p_f_n_l_e_s_s.html">TLBELOPFNLESSPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryLow</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new Hash Anchor Page Table Entry i.e. the first entry in the hash chain that is referenced by the Hash Anchor Table. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryHigh</em>&nbsp;</td><td>identifies all parameters of the high part </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryLow</em>&nbsp;</td><td>identifies all parameters except the page frame number of the low part </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>created Page Table Entry pointer if successful, NULL otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5002efe2fb3da2510b62affe18807174"></a><!-- doxytag: member="PageTable.h::createPageTableEntry" ref="g5002efe2fb3da2510b62affe18807174" args="(TLBEHIPtr pTLBEntryHigh, TLBELOPFNLESSPtr pTLBEntryLow, PageTableEntryPtr pHashAnchorPTEntry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> createPageTableEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryHigh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_l_o_p_f_n_l_e_s_s.html">TLBELOPFNLESSPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryLow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pHashAnchorPTEntry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new Page Table Entry with the high and low parameters. The hash chain is given. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryHigh</em>&nbsp;</td><td>identifies all parameters of the high part </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryLow</em>&nbsp;</td><td>identifies all parameters except the page frame number of the low part </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pHashAnchorPTEntry</em>&nbsp;</td><td>identifies the hash chain in which the entry is inserted </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>created Page Table Entry pointer if successful, NULL otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="g0037f23be8f09ed71ce7ff34f93adcb9"></a><!-- doxytag: member="PageTable.h::dissolvePageTableEntry" ref="g0037f23be8f09ed71ce7ff34f93adcb9" args="(PageTableEntryPtr pPTEntry, PageTableEntryPtr pHashAnchorPTEntry, PageTableEntryPtr pPrevPTEntry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL dissolvePageTableEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pPTEntry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pHashAnchorPTEntry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pPrevPTEntry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Dissovle given page table entry. Rechain page table chain and actualize HAT if necessary. Do not delete contents of dissolved page table entries. This is the job of the caller. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pPTEntry</em>&nbsp;</td><td>the Page Table Entry that should be dissolved </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pHashAnchorPTEntry</em>&nbsp;</td><td>the Page Table Entry identified by the Hash Anchor Table, i.e. the start of the hash chain </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pPrevPTEntry</em>&nbsp;</td><td>the Page Table Entry that is before the entry to dissolve in the hash chain </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if successful, FALSE otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="g85b6e33ff8a22b5c1e9e0b36e8f24c4c"></a><!-- doxytag: member="PageTable.h::freePageTableEntry" ref="g85b6e33ff8a22b5c1e9e0b36e8f24c4c" args="(TLBEHIPtr pTLBEntryHigh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL freePageTableEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryHigh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Dissolves the found Page Table Entry from all chains and set it to IllegalPTEntry except the page frame number. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryHigh</em>&nbsp;</td><td>the TLBEntryHigh Part that delivers the ASID and VPN </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if successful, false otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="g64821ed5828e71fb8cb12f99fffae069"></a><!-- doxytag: member="PageTable.h::getDissolvedVictimPTEntry" ref="g64821ed5828e71fb8cb12f99fffae069" args="(TLBEHIPtr pTLBEntryHigh, int *pIPTIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> getDissolvedVictimPTEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryHigh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>pIPTIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Dissolve a Page Table Entry from the Inverted Page Table and returns its index. At the moment only free PageTableEntries are returned. Later victim should be found via second change algorithm. Dissovling includes the hash-chain as well as the HashAnchor. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryHigh</em>&nbsp;</td><td>to identify if entry is unused via complete Inverted Page Table search </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pIPTIndex</em>&nbsp;</td><td>the inverted page table index of the dissolved page table entry </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the dissolved Page Table Entry pointer if successful, or NULL otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="gf5ebfb7e466013140327368b655792fe"></a><!-- doxytag: member="PageTable.h::initPageTable" ref="gf5ebfb7e466013140327368b655792fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initPageTable           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize all components of the Page Table. That means Hash Anchor Table and Inverted Page Table. 
</div>
</div><p>
<a class="anchor" name="g8edbef60b1d72e6ad3dffed3c57b5e7c"></a><!-- doxytag: member="PageTable.h::searchPageTableEntry" ref="g8edbef60b1d72e6ad3dffed3c57b5e7c" args="(TLBEHIPtr pTLBEntryHigh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> searchPageTableEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryHigh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Search a complete Page Table Entry via ASID and VPN of the given TLBEntryHigh part of the Page Table Entry. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryHigh</em>&nbsp;</td><td>high part with relevant ASID and VPN to search. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>found Page Table Entry pointer, NULL otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="g0021597aea50ac13519f811f316c4fd7"></a><!-- doxytag: member="PageTable.h::searchPageTableEntryLow" ref="g0021597aea50ac13519f811f316c4fd7" args="(TLBEHIPtr pTLBEntryHigh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_t_l_b_e_l_o.html">TLBELOPtr</a> searchPageTableEntryLow           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryHigh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Search the TLBEntryLow Part via ASID and VPN of the given TLBEntryHigh part of the Page Table Entry. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryHigh</em>&nbsp;</td><td>high part with relevant ASID and VPN to search. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>found TLB Low pointer, NULL otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="g621765a4679ecc5e2d8e1257ba21d440"></a><!-- doxytag: member="PageTable.h::updatePageTableEntry" ref="g621765a4679ecc5e2d8e1257ba21d440" args="(TLBEHIPtr pTLBEntryHigh, TLBELOPFNLESSPtr pTLBEntryLow)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_page_table_entry.html">PageTableEntryPtr</a> updatePageTableEntry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_h_i.html">TLBEHIPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryHigh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_l_b_e_l_o_p_f_n_l_e_s_s.html">TLBELOPFNLESSPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pTLBEntryLow</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update the Inverted Page Table Entry identified by tlbEntryHigh. If existent it is replaced, if not it is inserted in front of bucket-chain. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryHigh</em>&nbsp;</td><td>delivers ASID and VPN for search or all parameters of the high part for creation of entry </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pTLBEntryLow</em>&nbsp;</td><td>identifies all parameters except the page frame number of the low part </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>created or actualized Page Table Entry pointer if successful, NULL otherwise </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Feb 5 20:41:40 2009 for Halos by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
